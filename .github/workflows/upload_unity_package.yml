name: Upload Unity Package
on:
  workflow_call:
jobs:
  npm_registery_upload:
    runs-on: ubuntu-latest
    permissions:
      contents: read
      packages: write
    steps:
    - name: Checkout Project
      uses: actions/checkout@v2
    - name: Get Version
      run: |
        echo "PACKAGE_PATH=${{ github.workspace }}/${{ env.PACKAGE_ROOT_PATH }}/package.json" >> $GITHUB_ENV
        python .github/workflows/getUnityPackageVersion.py "${{ env.PACKAGE_PATH }}" "GITHUB_ENV"
    - name: Print Version
      run: echo "${{ env.PACKAGE_VERSION }}"
    # Setup .npmrc file to publish to GitHub Packages
    # - uses: actions/setup-node@v1
      # with:
        # node-version: '12.x'
        # registry-url: 'https://npm.pkg.github.com'
        # scope: '@octocat' # Defaults to the user or organization that owns the workflow file
    # - run: npm publish
      # working-directory: ${{ inputs.working_directory }}
      env:
        NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
